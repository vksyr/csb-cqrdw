{"version":3,"sources":["IncidentManager.js","index.js"],"names":["IncidentManager","props","dataSiteUrl","useState","companies","setCompanies","company","setCompany","group","setGroup","groupID","setGroupID","org","setOrg","serviceIDs","setServiceIDs","groups","setGroups","services","setServices","priorities","label","value","selectedPriorities","setSelectedPriorities","WorkLog","rowDetailData","setRowDetailData","show4HrContainmentView","setShow4HrContainmentView","showAgeKpi","setShowAgeKpi","ageKpiBtnCss","setAgeKpiBtnCss","ageKpiArrowColor","setAgeKpiArrowColor","ageKpiOptionsCss","setAgeKpiOptionsCss","kpiDateField","setKpiDateField","greenMaxAge","setGreenMaxAge","yellowMaxAge","setYellowMaxAge","redMaxAge","setRedMaxAge","dateFields","name","title","columns","setColumns","rows","setRows","React","useEffect","getGroups","getIncidents","length","filter","x","getServices","getCompanies","getCellValue","getKpi","concat","forEach","column","data","_color","grey","Age_KPI","indexOf","green","yellow","red","_text","_age","parseInt","Age_In_Minutes","_greenMaxAge","_yellowMaxAge","_redMaxAge","ex","sx","color","getKpiParams","dateFormatter","epoch","Intl","DateTimeFormat","year","month","day","format","DateTypeProvider","formatterComponent","fetch","headers","Accept","then","response","json","map","myJson","onShowAgeKpiClick","class","style","minWidth","onChange","val","options","option","obj","split","getOptionLabel","getOptionValue","service","some","isMulti","priority","paddingTop","type","checked","for","onClick","event","stopPropagation","fontSize","tf","defaultCurrentPage","pageSize","defaultSorting","columnName","direction","defaultValue","defaultHiddenColumnNames","showSortingControls","contentComponent","row","Incident_Number","Description","PriorityCode","Detailed_Decription","First_Name","Last_Name","Department","StatusCode","Assigned_Group","item","i","Work_Log_Submit_Date","Work_Log_Submitter","Detailed_Description","rootElement","document","getElementById","ReactDOM","render","href"],"mappings":"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","file":"static/js/main.c0ede39c.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport ArrowDropDownIcon from \"@mui/icons-material/ArrowDropDown\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport Circle from \"@mui/icons-material/Circle\";\nimport { grey, red, green, yellow } from \"@mui/material/colors\";\n\nimport {\n  SortingState,\n  IntegratedSorting,\n  SearchState,\n  IntegratedFiltering,\n  RowDetailState,\n  DataTypeProvider,\n  PagingState,\n  IntegratedPaging\n} from \"@devexpress/dx-react-grid\";\nimport {\n  Grid,\n  Table,\n  Toolbar,\n  SearchPanel,\n  TableHeaderRow,\n  TableRowDetail,\n  TableColumnVisibility,\n  PagingPanel\n} from \"@devexpress/dx-react-grid-material-ui\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nexport default function IncidentManager(props) {\n  const dataSiteUrl = \"data/\";\n\n  const [companies, setCompanies] = useState([]);\n  const [company, setCompany] = useState(null);\n  const [group, setGroup] = useState(null);\n  const [groupID, setGroupID] = useState(null);\n  const [org, setOrg] = useState(null);\n  const [serviceIDs, setServiceIDs] = useState([]);\n  const [groups, setGroups] = useState([]);\n  const [services, setServices] = useState([]);\n  const priorities = [\n    { label: \"Low\", value: \"3\" },\n    { label: \"Medium\", value: \"2\" },\n    { label: \"High\", value: \"1\" },\n    { label: \"Critical\", value: \"0\" }\n  ];\n  const [selectedPriorities, setSelectedPriorities] = useState([\n    { label: \"Low\", value: \"3\" },\n    { label: \"Medium\", value: \"2\" },\n    { label: \"High\", value: \"1\" },\n    { label: \"Critical\", value: \"0\" }\n  ]);\n  const [rowDetailData, setRowDetailData] = useState({ WorkLog: [] });\n\n  const [show4HrContainmentView, setShow4HrContainmentView] = useState(false);\n  const [showAgeKpi, setShowAgeKpi] = useState(false);\n  const [ageKpiBtnCss, setAgeKpiBtnCss] = useState(\"disabled\");\n  const [ageKpiArrowColor, setAgeKpiArrowColor] = useState(\"disabled\");\n  const [ageKpiOptionsCss, setAgeKpiOptionsCss] = useState(\"disabled\");\n  const [kpiDateField, setKpiDateField] = useState(\"Submit_Date\");\n  const [greenMaxAge, setGreenMaxAge] = useState(90);\n  const [yellowMaxAge, setYellowMaxAge] = useState(180);\n  const [redMaxAge, setRedMaxAge] = useState(240);\n  const dropOffField = \"Required_Resolution_DateTime\";\n  const dateFields = [\n    { label: \"Submit Date\", value: \"Submit_Date\" },\n    { label: \"Last Modified\", value: \"Last_Modified_Date\" },\n    { label: \"Last Resolved\", value: \"Last_Resolved_Date\" },\n    { label: \"Reported Date\", value: \"Reported_Date\" },\n    { label: \"Responded Date\", value: \"Responded_Date\" },\n    { label: \"Closed Date\", value: \"Closed_Date\" },\n    { label: \"Event Date\", value: \"Event_Date\" },\n    { label: \"Required Resolution\", value: \"Required_Resolution_DateTime\" },\n    { label: \"Estimated Resolution\", value: \"Estimated_Resolution_Date\" },\n    { label: \"Acknowledgement Date\", value: \"Acknowledgment_Start_Date\" },\n    { label: \"Resolution Start Date\", value: \"Resolution_Start_Date\" },\n    { label: \"Last SLA Hold Date\", value: \"Last_SLA_Hold_Date\" },\n    { label: \"VIP Assignment Date\", value: \"VIPAssignmentDateTime\" },\n    { label: \"VIP Dispatch Date\", value: \"VIPDispatchDateTime\" }\n  ];\n\n  const [columns, setColumns] = useState([\n    { name: \"Age_In_Minutes\", title: \"Age_In_Minutes\" },\n    { name: \"Incident_Number\", title: \"Incident Number\" },\n    { name: \"PriorityCode\", title: \"Priority\" },\n    { name: \"Description\", title: \"Summary\" },\n    { name: \"Submit_Date\", title: \"Submitted\" },\n    { name: \"Last_Modified_Date\", title: \"Modified\" },\n    { name: \"Assigned_Company_Group\", title: \"Company/Group\" },\n    { name: \"Assignee\", title: \"Assignee\" },\n    { name: \"ServiceCI\", title: \"ServiceCI\" },\n    { name: \"StatusCode\", title: \"Status\" },\n    { name: \"LastLog\", title: \"Last Log Entry\" }\n  ]);\n\n  const [rows, setRows] = useState([]);\n\n  React.useEffect(() => {\n    if (company) {\n      getGroups();\n    }\n    if (company) {\n      getIncidents();\n    }\n\n    // check if 24 hr containment is still toggled\n    if (\n      selectedPriorities.length !== 2 ||\n      selectedPriorities.filter((x) => x.label === \"High\").length !== 1 ||\n      selectedPriorities.filter((x) => x.label === \"Critical\").length !== 1\n    ) {\n      setShow4HrContainmentView(false);\n    }\n  }, [company, groupID, serviceIDs, selectedPriorities]);\n\n  React.useEffect(() => {\n    getServices();\n  }, [company, groupID, selectedPriorities]);\n\n  React.useEffect(() => {\n    getCompanies();\n  }, []);\n\n  React.useEffect(() => {\n    // remove\n    setColumns(columns.filter((x) => x.title !== \"Age\"));\n\n    if (showAgeKpi) {\n      // add column in grid\n      setColumns([{ getCellValue: getKpi, title: \"Age\" }].concat(columns)); // prepend to React State\n    } else setShow4HrContainmentView(false);\n  }, [showAgeKpi]);\n\n  React.useEffect(() => {\n    if (\n      ageKpiOptionsCss === \"disabled\" &&\n      (kpiDateField !== \"Submit_Date\" ||\n        greenMaxAge !== 90 ||\n        yellowMaxAge !== 180 ||\n        redMaxAge !== 240)\n    ) {\n      setShow4HrContainmentView(false);\n    }\n  }, [ageKpiOptionsCss]);\n\n  React.useEffect(() => {\n    // remove\n\n    if (show4HrContainmentView) {\n      setSelectedPriorities([\n        { label: \"High\", value: \"2\" },\n        { label: \"Critical\", value: \"3\" }\n      ]);\n      setKpiDateField(\"Event_Date\");\n      setGreenMaxAge(90);\n      setYellowMaxAge(180);\n      setRedMaxAge(240);\n      setShowAgeKpi(true);\n\n      columns\n        .filter((x) => x.title === \"Submitted\")\n        .forEach((column) => {\n          column.title = \"4-HR Start Date\";\n          column.name = kpiDateField;\n        });\n\n      // set service, company, group\n      setCompany(\"All\");\n      setGroup(\"All\");\n      setGroupID(\"All\");\n\n      //todo: highlight stuff blue\n    } else {\n      columns\n        .filter((x) => x.title === \"4-HR Start Date\")\n        .forEach((column) => {\n          column.title = \"Submitted\";\n          column.name = \"Submit_date\";\n        });\n    }\n  }, [show4HrContainmentView]);\n\n  const getKpi = (data) => {\n    let _color = grey[500];\n    if (data.Age_KPI.indexOf(\"green.gif\") !== -1) _color = green[500];\n    else if (data.Age_KPI.indexOf(\"yellow.gif\") !== -1) _color = yellow[500];\n    else if (data.Age_KPI.indexOf(\"red.gif\") !== -1) _color = red[500];\n\n    let _text = \"\";\n    let _age = 0;\n    try {\n      let _age = parseInt(data.Age_In_Minutes);\n      let _greenMaxAge = parseInt(greenMaxAge);\n      let _yellowMaxAge = parseInt(yellowMaxAge);\n      let _redMaxAge = parseInt(redMaxAge);\n\n      if (_age > _redMaxAge) {\n        _text = \"Exceeded!\";\n      } else if (_age > _yellowMaxAge) {\n        _text = \"-\" + _redMaxAge - _age;\n      } else if (_age <= _greenMaxAge) {\n        _text = \"-\" + _greenMaxAge - _age;\n      } else {\n        _text = \"-\" + _yellowMaxAge - _age;\n      }\n    } catch (ex) {}\n\n    return (\n      <div>\n        <Circle sx={{ color: _color }} /> {_text}\n      </div>\n    );\n  };\n\n  const getKpiParams = () => {\n    return `StartDateField%3D${kpiDateField};DropOffField%3D${dropOffField};GreenMaxAge%3D${greenMaxAge};YellowMaxAge%3D${yellowMaxAge};RedMaxAge%3D${redMaxAge}`;\n  };\n\n  const dateFormatter = (epoch) => {\n    let date = new Intl.DateTimeFormat(\"en-US\", {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\"\n    }).format(epoch.value); // 01/11/2021\n    return date;\n  };\n\n  const DateTypeProvider = (props) => (\n    <DataTypeProvider formatterComponent={dateFormatter} {...props} />\n  );\n\n  const getCompanies = () => {\n    fetch(`${dataSiteUrl}companies.json?opCode=GetCompanies`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    })\n      .then(function (response) {\n        return response.json();\n      })\n      .then(function (json) {\n        setCompanies([{ label: \"All\", value: \"All\" }].concat(json.data));\n      });\n  };\n\n  const getGroups = () => {\n    fetch(`${dataSiteUrl}groups.json?opCode=GetGroups&Company=${company}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    })\n      .then(function (response) {\n        return response.json();\n      })\n      .then(function (json) {\n        setGroups([{ label: \"All\", value: \"All\" }].concat(json.data));\n      });\n  };\n\n  const getServices = () => {\n    if (show4HrContainmentView) {\n      setServices([{ label: \"CyberSecurity\", value: \"CyberSecurity\" }]);\n      setServiceIDs([{ label: \"CyberSecurity\", value: \"CyberSecurity\" }]);\n    } else {\n      fetch(\n        `${dataSiteUrl}services.json?opCode=GetServices&Company=${company}&Org=${org}&GroupID=${groupID}&Priorities=${priorities.map(\n          (x) => x.value\n        )}&Filter=&KpiParams=${getKpiParams()}`,\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }\n        }\n      )\n        .then(function (response) {\n          return response.json();\n        })\n        .then(function (myJson) {\n          setServices(myJson.data);\n        });\n    }\n  };\n\n  const getIncidents = () => {\n    fetch(\n      `${dataSiteUrl}incidents.json?opCode=GetIncidents&Company=${company}&Org=${org}&GroupID=${groupID}&Priorities=${priorities.map(\n        (x) => x.value\n      )}&Services=${services.map(\n        (x) => x.value\n      )}&Filter=&KpiParams=${getKpiParams()}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        }\n      }\n    )\n      .then(function (response) {\n        return response.json();\n      })\n      .then(function (myJson) {\n        setRows(myJson.data);\n      });\n  };\n\n  const onCompanyChange = (val) => {\n    setGroupID(null);\n    setServiceIDs([]);\n    setCompany(val.value);\n  };\n\n  const onGroupChange = (obj) => {\n    setGroup(obj.value);\n    if (obj.value.indexOf(\"|\") !== -1) {\n      setOrg(obj.value.split(\"|\")[0]);\n      setGroupID(obj.value.split(\"|\")[1]);\n    }\n  };\n\n  const onShowAgeKpiChange = (val) => {\n    setShowAgeKpi(!showAgeKpi);\n    if (!showAgeKpi) {\n      setAgeKpiArrowColor(\"primary\");\n      setAgeKpiBtnCss(\"active\");\n    } else {\n      // Style dropdown\n      setAgeKpiArrowColor(\"disabled\");\n      setAgeKpiBtnCss(\"disabled\");\n      setAgeKpiOptionsCss(\"disabled\");\n    }\n  };\n\n  const onShowAgeKpiClick = () => {\n    if (showAgeKpi) {\n      setAgeKpiOptionsCss(\n        ageKpiOptionsCss === \"enabled\" ? \"disabled\" : \"enabled\"\n      );\n      setAgeKpiBtnCss(ageKpiOptionsCss === \"enabled\" ? \"active\" : \"selected\");\n    }\n  };\n\n  const RowDetail = ({ row }) => {\n    if (\n      rowDetailData.Incident_Number == null ||\n      rowDetailData.Incident_Number != row.Incident_Number\n    ) {\n      fetch(\n        `${dataSiteUrl}incident.json?opCode=GetIncident&IncidentNumber=${row.Incident_Number}`,\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }\n        }\n      )\n        .then(function (response) {\n          return response.json();\n        })\n        .then(function (json) {\n          json.data.Incident_Number = row.Incident_Number;\n          setRowDetailData(json.data);\n        });\n    }\n\n    return (\n      <div>\n        <div class=\"detail-field\">\n          <strong>Summary:</strong>\n          <br />\n          {rowDetailData.Description}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Priority:</strong>\n          <br />\n          {rowDetailData.PriorityCode}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Notes:</strong>\n          <br />\n          {rowDetailData.Detailed_Decription}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Customer/Office:</strong>\n          <br />\n          {rowDetailData.First_Name} {rowDetailData.Last_Name} /{\" \"}\n          {rowDetailData.Department}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Status:</strong>\n          <br />\n          {rowDetailData.StatusCode}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Assigned Group:</strong>\n          <br />\n          {rowDetailData.Assigned_Group}\n        </div>\n        <div class=\"detail-field\">\n          <strong>Log Entries:</strong>\n          <br />\n          {rowDetailData.WorkLog.map(function (item, i) {\n            return (\n              <div>\n                <div class=\"worklog-header\">\n                  {dateFormatter(item.Work_Log_Submit_Date)} /{\" \"}\n                  {item.Work_Log_Submitter}\n                </div>\n                <div class=\"worklog-body\">{item.Detailed_Description}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      <div class=\"filter-container\">\n        <form>\n          <label class=\"label-nowrap\">\n            Company:\n            <Select\n              style={{ minWidth: `140px` }}\n              onChange={onCompanyChange}\n              options={companies}\n              value={companies.filter(function (option) {\n                return option.value === company;\n              })}\n            ></Select>\n          </label>\n          <label>\n            Group:\n            <Select\n              style={{ minWidth: `320px` }}\n              value={groups.filter(function (option) {\n                return option.value === group;\n              })}\n              onChange={onGroupChange}\n              options={groups}\n              getOptionLabel={(x) => x.label}\n              getOptionValue={(x) => x.value}\n            ></Select>\n          </label>\n          <label>\n            Services:\n            <Select\n              style={{ minWidth: `320px` }}\n              value={services.filter(function (service) {\n                return serviceIDs.some((x) => service.value === x.value);\n              })}\n              onChange={(val) => {\n                setShow4HrContainmentView(false);\n                setServiceIDs((serviceIDs) => {\n                  return val;\n                });\n              }}\n              options={services}\n              isMulti\n            ></Select>\n          </label>\n\n          <label>\n            Priorities:\n            <Select\n              style={{ minWidth: `180px` }}\n              value={priorities.filter(function (priority) {\n                return selectedPriorities.some(\n                  (x) => priority.value === x.value\n                );\n              })}\n              onChange={(val) => {\n                setSelectedPriorities((selectedPriorities) => {\n                  return val;\n                });\n              }}\n              options={priorities}\n              class=\"form-check-input\"\n              isMulti\n            ></Select>\n          </label>\n          <div style={{ paddingTop: 10 }}>\n            <label>\n              <div class=\"form-check form-switch\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  checked={show4HrContainmentView}\n                  onChange={() =>\n                    setShow4HrContainmentView(!show4HrContainmentView)\n                  }\n                />\n                <label class=\"form-check-label\" for=\"flexSwitchCheckDefault\">\n                  Show 4HR-Containment View\n                </label>\n              </div>\n            </label>\n\n            <label>\n              <div class=\"form-check form-switch\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  checked={showAgeKpi}\n                  onChange={onShowAgeKpiChange}\n                />\n                <label\n                  onClick={onShowAgeKpiClick}\n                  class={\"form-check-label age-kpi-btn-\" + ageKpiBtnCss}\n                  for=\"flexSwitchCheckDefault\"\n                >\n                  Show age indicators\n                  <ArrowDropDownIcon color={ageKpiArrowColor} />\n                  <div\n                    onClick={(event) => event.stopPropagation()}\n                    class={\"age-kpi-options-\" + ageKpiOptionsCss}\n                  >\n                    <span class=\"close-icon\" onClick={onShowAgeKpiClick}>\n                      <CloseIcon fontSize=\"small\" />\n                    </span>\n                    <div class=\"label-nowrap\">\n                      Age field:&nbsp;\n                      <label>\n                        <Select\n                          onChange={(val) => setKpiDateField(val.value)}\n                          options={dateFields}\n                          value={dateFields.filter(function (option) {\n                            return option.value === kpiDateField;\n                          })}\n                        ></Select>\n                      </label>\n                      <br />\n                      Green Max Age:&nbsp;\n                      <label>\n                        <input\n                          value={greenMaxAge}\n                          onChange={(tf) => setGreenMaxAge(tf.value)}\n                          type=\"text\"\n                          class=\"form-control\"\n                        />\n                      </label>\n                      <br />\n                      Yellow Max Age:&nbsp;\n                      <label>\n                        <input\n                          value={yellowMaxAge}\n                          onChange={(tf) => setYellowMaxAge(tf.value)}\n                          type=\"text\"\n                          class=\"form-control\"\n                        />\n                      </label>\n                      <br />\n                      Red Max Age:&nbsp;\n                      <label>\n                        <input\n                          value={redMaxAge}\n                          onChange={(tf) => setRedMaxAge(tf.value)}\n                          type=\"text\"\n                          class=\"form-control\"\n                        />\n                      </label>\n                    </div>\n                    <span class=\"footer\">* in minutes</span>\n                  </div>\n                </label>\n              </div>\n            </label>\n          </div>\n        </form>\n      </div>\n      <div class=\"grid\">\n        <Grid rows={rows} columns={columns}>\n          <PagingState defaultCurrentPage={0} pageSize={20} />\n          <IntegratedPaging />\n          <SortingState\n            defaultSorting={[{ columnName: \"Name\", direction: \"asc\" }]}\n          />\n          <IntegratedSorting />\n          <RowDetailState />\n          <SearchState defaultValue=\"\" />\n          <IntegratedFiltering />\n          <DateTypeProvider for={dateFields.map((x) => x.value)} />\n          <Table />\n          <TableColumnVisibility\n            defaultHiddenColumnNames={[\"Age_In_Minutes\"]}\n          />\n          <TableHeaderRow showSortingControls />\n          <PagingPanel />\n          <TableRowDetail contentComponent={RowDetail} />\n        </Grid>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport IncidentManager from \"./IncidentManager.js\";\n\nimport \"./styles.css\";\n\nconst rootElement = document.getElementById(\"root\");\n\nReactDOM.render(\n  <div>\n    <nav class=\"navbar navbar-default\">\n      <div class=\"container-fluid\">\n        <a class=\"navbar-brand\" href=\"#\">\n          Incident Manager\n        </a>\n      </div>\n    </nav>\n    <IncidentManager />\n  </div>,\n  rootElement\n);\n"],"sourceRoot":""}